var js3 = require('./');
var typeOf=js3.typeOf;
var extend=js3.extend;
var queryParse=js3.queryParse;
var test = require('tape');



test('typeOf', function(t){
  t.ok(typeOf(null)==='null',"typeOf(null)==='null'");
  t.ok(typeOf([])==='array',"typeOf([])==='array'");
  t.ok(typeOf({'0':'hi'})==='object',"typeOf({'0':'hi'})==='object'");

  t.ok(typeOf(new Date())==='object',"typeOf(new Date())==='object'");
  t.ok(typeOf(new Date(),true)==='date',"typeOf(new Date(),true)==='date'");

  t.ok(typeOf(NaN)==='number',"typeOf(NaN)==='number'");
  t.ok(typeOf(NaN,true)==='nan',"typeOf(NaN,true)==='nan'");
  t.notOk(typeOf(NaN,true)==='number');


  t.end();
});

test('queryParse', function(t){

  var str='custom=u&time=now';
  var obj=queryParse(str);
  t.ok( obj.custom==='u' );
  t.ok( obj.time==='now' );
  t.ok( Object.keys(obj).toString()==='custom,time' );

  var str2='?a=1&b=2';
  var obj2=queryParse(str2);
  t.ok( obj2.a==='1' );
  t.ok( obj2.b==='2' );
  t.ok( Object.keys(obj2).toString()==='a,b' );

  t.ok( typeOf(queryParse(null)) === 'object' );
  t.ok( typeOf(queryParse(undefined)) === 'object' );
  t.ok( Object.keys(queryParse(null)).length===0 );
  t.ok( Object.keys(queryParse(undefined)).length===0 );


  t.end();
});

test('extend', function(t){
  t.ok(
      JSON.stringify( extend({a:1},{a:2,b:2}) ) === '{"a":2,"b":2}'
  );

  t.ok(
      JSON.stringify( extend({a:1},{a:2,b:2},false) ) === '{"a":1,"b":2}'
  );

  t.ok(
      JSON.stringify( extend({a:1},{a:2,b:2},{a:3,c:3}) ) === '{"a":3,"b":2,"c":3}'
  );

  t.ok(
      JSON.stringify( extend({a:1},{a:2,b:2},{a:3,b:3,c:3},false) ) === '{"a":1,"b":2,"c":3}'
  );

  t.end();
});


