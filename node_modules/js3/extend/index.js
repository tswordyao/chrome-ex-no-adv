var hasProp=Object.prototype.hasOwnProperty;
function extend(target){
    var extensions=[].slice.call(arguments,1);
    var dontOverride =arguments[arguments.length-1]===false;
    var extension;
    if(target===null || typeof target!=='object'){
        throw new Error('the extend target is not a object!');
    }
    for(var i=0; i<extensions.length; i++){
        extension=extensions[i];
        if(extension!==null && typeof extension=='object'){
            for(var n in extension){
                if(hasProp.call(extension,n)){
                    if( !(dontOverride && hasProp.call(target,n)) ){
                        target[n] = extension[n];
                    }
                }
            }
        }
    }
    return target;
}

module.exports = extend;
